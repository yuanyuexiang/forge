query GetDashboardData($today: String) {
  # 直接查询各个表的记录数 - 使用较小的限制以验证数据存在
  users(limit: 1000) {
    id
  }
  products(limit: 1000) {
    id
  }
  orders(limit: 1000) {
    id
  }
  categories(limit: 1000) {
    id
  }
  boutiques(limit: 1000) {
    id
  }
  
  # 使用聚合查询获取总数
  users_aggregated {
    countAll
  }
  products_aggregated {
    countAll
  }
  orders_aggregated {
    countAll
  }
  categories_aggregated {
    countAll
  }
  boutiques_aggregated {
    countAll
  }
  
  # 今日订单
  today_orders: orders(filter: { 
    created_at: { _gte: $today } 
  }) {
    id
    status
  }
}

query GetRecentOrders($limit: Int = 5) {
  orders(limit: $limit, sort: ["-created_at"]) {
    id
    user_id {
      id
      name
      email
    }
    total_price
    status
    created_at
  }
}
