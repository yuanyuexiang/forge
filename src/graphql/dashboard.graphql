query GetDashboardData($today: String) {
  # 直接查询各个表的记录数
  users(limit: 0) {
    id
  }
  products(limit: 0) {
    id
  }
  orders(limit: 0) {
    id
  }
  categories(limit: 0) {
    id
  }
  
  # 已完成订单（用于计算总销售额）
  completed_orders: orders(filter: { status: { _eq: "completed" } }) {
    id
    total_price
  }
  
  # 今日订单
  today_orders: orders(filter: { 
    created_at: { _gte: $today } 
  }) {
    id
    total_price
    status
  }
}

query GetRecentUsers($limit: Int = 5) {
  users(limit: $limit, sort: ["-created_at"]) {
    id
    name
    email
    created_at
  }
}

query GetRecentProducts($limit: Int = 5) {
  products(limit: $limit, sort: ["-created_at"]) {
    id
    name
    price
    stock
    status
    created_at
  }
}

query GetRecentOrders($limit: Int = 5) {
  orders(limit: $limit, sort: ["-created_at"]) {
    id
    user_id {
      id
      name
      email
    }
    total_price
    status
    created_at
  }
}
