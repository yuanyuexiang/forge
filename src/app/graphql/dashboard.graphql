query GetDashboardData($today: String) {
  users_aggregated {
    countAll
  }
  products_aggregated {
    countAll
  }
  orders_aggregated {
    countAll
  }
  categories_aggregated {
    countAll
  }
  # 总销售额（所有已完成订单）
  total_revenue: orders_aggregated(filter: { status: { _eq: "completed" } }) {
    sum {
      total_price
    }
  }
  # 今日订单数
  today_orders: orders_aggregated(filter: { 
    created_at: { _gte: $today } 
  }) {
    countAll
  }
  # 今日销售额
  today_revenue: orders_aggregated(filter: { 
    created_at: { _gte: $today }
    status: { _eq: "completed" }
  }) {
    sum {
      total_price
    }
  }
}

query GetRecentUsers($limit: Int = 5) {
  users(limit: $limit, sort: ["-created_at"]) {
    id
    name
    email
    created_at
  }
}

query GetRecentProducts($limit: Int = 5) {
  products(limit: $limit, sort: ["-created_at"]) {
    id
    name
    price
    stock
    created_at
  }
}
